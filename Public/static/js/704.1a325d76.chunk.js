"use strict";(self.webpackChunktest_demo=self.webpackChunktest_demo||[]).push([[704],{83792:function(n,e,t){var a=t(29439),r=t(1413),i=t(47313),o=t(26418),s=t(23486),c=t(46417),l=function(n){return(0,c.jsx)("button",(0,r.Z)((0,r.Z)({},n),{},{children:n.children}))};e.Z=function(n){var e=(0,i.useState)(null),t=(0,a.Z)(e,2),r=t[0],u=t[1],d=n.PageButtonComponent,h=void 0===d?l:d,f=n.changeMethodFlag,m=n.onPageChange,p=n.page,g=n.resetMethodFlag,x=n.page+1,b=(0,i.useCallback)((function(n,e){return e<7?v([1,2,3,4,5,6],e):n%5>=0&&n>4&&n+2<e?[1,n-1,n,n+1,e]:n%5>=0&&n>4&&n+2>=e?[1,e-3,e-2,e-1,e]:[1,2,3,4,5,e]}),[]);(0,i.useEffect)((function(){u(b(null,n.pages))}),[b,n.pages]),(0,i.useEffect)((function(){f&&(0===p?(m(null),m(0)):m(0),g())}),[f,m,p,g]);var v=function(n,e){return n.filter((function(n){return n<=e}))},j=function(e){if(e!==n.page+1){var t=b(e,n.pages);u(v(t,n.pages)),n.onPageChange(e-1)}};return(0,c.jsxs)("div",{className:"Table__pagination",children:[(0,c.jsx)("div",{className:"Table__prevPageWrapper",children:(0,c.jsx)(h,{className:"Table__pageButton",onClick:function(){1!==x&&j(x-1)},disabled:1===x,children:(0,c.jsx)(o.Z,{size:18})})}),(0,c.jsx)("div",{className:"Table__visiblePagesWrapper",children:r&&r.map((function(n,e,t){return(0,c.jsx)(h,{className:x===n?"Table__pageButton Table__pageButton--active":"Table__pageButton",onClick:j.bind(null,n),children:t[e-1]+2<n?"...".concat(n):n},n)}))}),(0,c.jsx)("div",{className:"Table__nextPageWrapper",children:(0,c.jsx)(h,{className:"Table__pageButton",onClick:function(){x!==n.pages&&j(x+1)},disabled:x===n.pages,children:(0,c.jsx)(s.Z,{size:18})})})]})}},5941:function(n,e,t){t(47313);var a=t(97520),r=t.n(a),i=t(46417);e.Z=function(n){var e=n.isOpen,t=n.onClose,a=n.confirmText,o=n.message,s=n.handleConfirm,c=n.cancleBtnTxt,l=n.customIcon,u=n.titleTxt,d=a||"Yes, delete it!",h=!!l;return(0,i.jsx)("div",{children:(0,i.jsx)(r(),{warning:!l,custom:h,showCancel:!0,show:e,confirmBtnText:d,confirmBtnBsStyle:"secondary btn-sm confirmBtn",cancelBtnBsStyle:"success btn-sm confirmBtn",title:u||"",customIcon:l,onConfirm:function(){s()},onCancel:t,cancelBtnText:c||"Cancel",children:o})})}},28767:function(n,e,t){var a,r=t(30168),i=t(17387).ZP.div(a||(a=(0,r.Z)(['\n  .tbl-loader {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    background: rgba(0, 0, 0, 0.05);\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .lds-ring {\n      div {\n        width: 8px !important;\n        height: 45px !important;\n        margin: 0px !important;\n        border-color: #563c91 transparent transparent transparent !important;\n      }\n    }\n  }\n\n  .module-header {\n    display: flex;\n    align-items: center;\n    @media (max-width: 575.98px) {\n      display: block;\n      .react-form-input {\n        margin-top: 15px;\n        margin-bottom: 5px;\n      }\n      button {\n        margin: 0 !important;\n      }\n    }\n  }\n  table {\n    width: 100%;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n  }\n\n  tr:nth-child(even) {\n    background: rgba(0, 0, 0, 0.03);\n  }\n\n  tr:nth-child(odd) {\n    background: rgba(255, 255, 255);\n  }\n\n  .table-container {\n    margin: auto 24px;\n    padding-bottom: 20px;\n  }\n  .custom-react-table-theme-class {\n    th {\n      min-width: 200px;\n    }\n    tbody {\n      td {\n        padding: 10px;\n        font-family: "muli-medium";\n        color: #757575;\n      }\n      td.wide-cell {\n        width: 150px;\n      }\n    }\n  }\n\n  .Table__itemCount {\n    font-size: 14px;\n  }\n\n  .Table__pagination {\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px 24px;\n  }\n\n  .Table__pageButton {\n    font-size: 14px;\n    outline: none;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    color: #757575 !important;\n    margin: 0 5px;\n  }\n\n  .Table__pageButton:disabled {\n    cursor: not-allowed;\n    color: gray;\n  }\n\n  .Table__pageButton--active {\n    font-weight: bold;\n    background: #6ab664;\n    color: white !important;\n    width: 38px;\n    height: 29px;\n    border-radius: 6px;\n  }\n\n  .tabl-search {\n    padding: 4px;\n    margin: 10px;\n    border-radius: 3px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    &:focus {\n      outline: 0;\n    }\n  }\n\n  .back-icon {\n    position: absolute;\n    right: 30px;\n    bottom: 27px;\n    color: #563c91;\n  }\n\n  .-sort-desc {\n    box-shadow: none !important;\n    &:before {\n      content: "\u25bc";\n      float: right;\n      margin-right: 14px;\n      color: #563c91;\n    }\n  }\n\n  .-sort-asc {\n    box-shadow: none !important;\n    &:before {\n      content: "\u25b2";\n      float: right;\n      margin-right: 14px;\n      color: #563c91;\n    }\n  }\n  .react-action-class.wide-cell {\n    width: 150px;\n  }\n  .react-action-class {\n    button {\n      height: auto !important;\n      width: auto !important;\n    }\n  }\n  .break-word {\n    word-break: break-word;\n  }\n'])));e.Z=i},48934:function(n,e,t){t.d(e,{Bb:function(){return d},JI:function(){return r},Ot:function(){return i},_r:function(){return c},i8:function(){return u},lg:function(){return h},m9:function(){return s},ve:function(){return l},wB:function(){return o}});var a=t(20086),r=function(n){return(0,a.hi)(n).get("admin/dashboard/totalNoOfStation").then(a._y).catch(a.S3)},i=function(n){return(0,a.hi)(n).get("admin/dashboard/getTotalUser").then(a._y).catch(a.S3)},o=function(n){return(0,a.hi)(n).get("admin/dashboard/totalMerchant").then(a._y).catch(a.S3)},s=function(n){return(0,a.hi)(n).get("admin/dashboard/getRecentlySubscribeMerchant").then(a._y).catch(a.S3)},c=function(n,e){return(0,a.hi)(n).get("admin/dashboard/getSubscriptionByMonth?year=".concat(e)).then(a._y).catch(a.S3)},l=function(n,e){return(0,a.hi)(n).get("admin/dashboard/getBookingByYearMonth?year=".concat(e)).then(a._y).catch(a.S3)},u=function(n,e){return(0,a.hi)(n).get("admin/dashboard/getMerchantByYearMonth?year=".concat(e)).then(a._y).catch(a.S3)},d=function(n){return(0,a.hi)(n).get("admin/dashboard/getTotalSubscriptionRevenu").then(a._y).catch(a.S3)},h=function(n){return(0,a.hi)(n).get("admin/station/getAllStations").then(a._y).catch(a.S3)}},76704:function(n,e,t){t.r(e),t.d(e,{default:function(){return D}});var a=t(74165),r=t(15861),i=t(1413),o=t(29439),s=t(47313),c=t(45110),l=t(83792),u=t(28767),d=t(1084),h=t(9038),f=t(88867),m=t(78911),p=t(5211),g=t(5941),x=t(59884),b=t(14303),v=t(42995),j=t(20086),Z=function(n,e){return(0,j.hi)(n).get("/admin/station/getStationImages?search=".concat(e.search,"&page=").concat(e.currentPage,"&sortBy=").concat(e.sortOrder,"&sortedF=").concat(e.sortBy,"&limit=").concat(e.limit)).then(j._y).catch(j.S3)},y=function(n,e){return(0,j.hi)(n).post("/admin/station/addStationImages",e).then(j._y).catch(j.S3)},S=function(n,e,t){return(0,j.hi)(n).put("admin/station/editStationImages/".concat(t),e).then(j._y).catch(j.S3)},w=t(93433),_=t(12756),k=t(12213),C=t(79429),B=t(15869),N=(0,C.j0)({validationSchema:B.Ry().shape({images:B.nK(),stationId:B.Z_().required("Please select station")}),mapPropsToValues:function(n){return{images:[],stationId:""}},validateOnMount:!0,handleSubmit:function(n){},displayName:"AminityValidationForm",enableReinitialize:!0}),T=t(56734),I=t(11585),P=t(48934),z=t(46417),E=T.Z.success,O=T.Z.error,R=T.Z.fetching,A=(0,h.qC)(N,(0,d.$j)((function(n){return(0,i.Z)((0,i.Z)({},n.themeChanger),{},{token:n.auth.accessToken})}),{success:E,error:O,fetching:R}))((function(n){var e,t=n.isEdit,c=n.editData,l=n.onClose;(0,s.useEffect)((function(){t&&x(c)}),[t]),(0,s.useEffect)((function(){var n=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(){return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,P.lg)(p).then((function(n){var e,t=null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.map((function(n){return{value:n._id,label:n.name}})),a=[{value:"",label:"Select a station",isDisabled:!0}].concat((0,w.Z)(t));F(a)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var u=n.values,d=(n.handleChange,n.handleBlur),h=n.errors,f=n.touched,m=n.submitCount,p=n.token,g=n.isValid,x=n.setValues,b=n.handleSubmit,v=n.toggleRefresh,j=n.setFieldValue,Z=(0,s.useState)(!1),C=(0,o.Z)(Z,2),B=C[0],N=C[1],T=(0,s.useState)([]),R=(0,o.Z)(T,2),A=R[0],F=R[1],M=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(e){var r,i,o;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.preventDefault(),b(),g){n.next=4;break}return n.abrupt("return");case 4:if((r=new FormData).append("stationId",u.stationId),i=[],o=[],t?(null===u||void 0===u||u.images.filter((function(n,e){return n instanceof Blob?(i.push(n),!1):"string"==typeof n?(o.push(n),!1):void 0})),i.forEach((function(n){r.append("image",n)})),r.append("oldImage",JSON.stringify(o))):u.images.filter((function(n){return"string"!==typeof n})).forEach((function(n){r.append("image",n)})),N(!0),!t){n.next=15;break}return n.next=13,S(p,r,u._id).then((function(n){n.success?(E(n.message),v(!0),N(!1),l()):(O(n.message),N(!1))}));case 13:n.next=17;break;case 15:return n.next=17,y(p,r).then((function(n){n.success?(E(n.message),N(!1),v(!0),l()):(O(n.message),N(!1),v(!0))}));case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),H=function(n){var e=n.field;return h[e]&&f[e]||m>0?(0,z.jsx)("span",{className:n.class?n.class:"error-msg",children:h[e]}):(0,z.jsx)("span",{})};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(_.Z,{toggle:function(){return l()},children:[t?"Edit":"Add"," Images"]}),(0,z.jsxs)(k.Z,{children:[(0,z.jsxs)("form",{className:"row g-3",children:[(0,z.jsxs)("div",{className:"col-md-6  form-group",children:[(0,z.jsxs)("label",{children:["Choose Station ",(0,z.jsx)("span",{className:"RedClass",children:"*"})]}),(0,z.jsx)(I.ZP,{className:"fcapitalize-text",onBlur:d,value:null===A||void 0===A?void 0:A.find((function(n){return n.value===u.stationId})),onChange:function(n){j("stationId",n.value)},options:null===A||void 0===A?void 0:A.map((function(n){return(0,i.Z)((0,i.Z)({},n),{},{label:n.label.charAt(0).toUpperCase()+n.label.slice(1)})}))}),(0,z.jsx)(H,{field:"stationId"})]}),(0,z.jsxs)("div",{className:"col-md-6 form-group",children:[(0,z.jsxs)("label",{children:["Image ",(0,z.jsx)("span",{style:{color:"red",fontWeight:"bold"}})]}),(0,z.jsx)("input",{type:"file",className:"form-control react-form-input",id:"images",onChange:function(n){j("images",[].concat((0,w.Z)(u.images),[n.target.files[0]]))},onBlur:d,placeholder:"Image",accept:"image/*"}),null===(e=u.images)||void 0===e?void 0:e.map((function(n,e){return"object"===typeof n?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("img",{src:URL.createObjectURL(n),height:80,width:100,alt:"".concat(n.filename,"_image")}),(0,z.jsx)("button",{onClick:function(){return j("images",u.images.filter((function(n,t){return t!==e})))},children:"X"})]}):"string"===typeof n?(0,z.jsx)(z.Fragment,{children:(0,z.jsx)("img",{src:"".concat("http://3.142.224.88:8000","/").concat(n),height:80,width:100,alt:"".concat(u._id,"_image")})}):null}))]})]}),(0,z.jsxs)("div",{className:"row justify-content-center",children:[(0,z.jsx)("button",{color:"success",onClick:function(n){return M(n)},type:"submit",className:"btn btn-success mx-3 btnsize",disabled:B,children:t?"Update":"Save"}),(0,z.jsx)("button",{onClick:function(){l()},className:"btn btn-secondary btnsize",children:"Cancel"})]})]})]})})),F=f.Z.success,M=f.Z.error,H=f.Z.fetching,D=(0,h.qC)((0,d.$j)((function(n){return{accessToken:n.auth.accessToken}}),{success:F,error:M,fetching:H}))((function(n){var e=n.accessToken,t=n.error,d=n.success,h=n.fetching,f=(0,s.useState)([]),y=(0,o.Z)(f,2),S=y[0],w=y[1],_=(0,s.useState)(0),k=(0,o.Z)(_,2),C=k[0],B=k[1],N=(0,s.useState)(1),T=(0,o.Z)(N,2),I=T[0],P=T[1],E=(0,s.useState)(!0),O=(0,o.Z)(E,2),R=O[0],F=O[1],M=(0,s.useState)(!1),H=(0,o.Z)(M,2),D=H[0],U=H[1],V=(0,s.useState)(!1),W=(0,o.Z)(V,2),q=W[0],Y=W[1],G=(0,s.useState)(!1),J=(0,o.Z)(G,2),L=(J[0],J[1]),$=(0,s.useState)(10),K=(0,o.Z)($,2),X=K[0],Q=(K[1],(0,s.useState)("")),nn=(0,o.Z)(Q,2),en=nn[0],tn=(nn[1],(0,s.useState)(1)),an=(0,o.Z)(tn,2),rn=(an[0],an[1]),on=(0,s.useState)(""),sn=(0,o.Z)(on,2),cn=sn[0],ln=sn[1],un=(0,s.useState)("asc"),dn=(0,o.Z)(un,2),hn=dn[0],fn=dn[1],mn=(0,s.useState)(),pn=(0,o.Z)(mn,2),gn=pn[0],xn=pn[1],bn=(0,s.useState)(""),vn=(0,o.Z)(bn,2),jn=vn[0],Zn=vn[1],yn=(0,s.useState)({}),Sn=(0,o.Z)(yn,2),wn=Sn[0],_n=Sn[1],kn=function(n){var e=n.title,t=n.renderSortArrow;return(0,z.jsxs)("div",{children:[e,t&&t()]})},Cn=(0,s.useMemo)((function(){return[{Header:function(n){return(0,z.jsx)(kn,{title:"Index",renderSortArrow:function(){return On(n.column.id)}})},accessor:"index",Cell:function(n){return(0,z.jsx)("span",{children:n.row.index+1})}},{Header:function(n){return(0,z.jsx)(kn,{title:"Name",renderSortArrow:function(){return On(n.column.id)}})},accessor:"stationId.name"},{Header:function(n){return(0,z.jsx)(kn,{title:"Action"})},accessor:"action",Cell:function(n){return(0,z.jsxs)("div",{className:"d-flex",children:[(0,z.jsx)("div",{children:(0,z.jsx)(x.Z,{size:18,onClick:function(){var e,t;Y(!0),U(!0),_n((0,i.Z)((0,i.Z)({},null===n||void 0===n?void 0:n.row.original),{},{title:null===n||void 0===n?void 0:n.row.original.name,stationId:null===n||void 0===n||null===(e=n.row.original)||void 0===e||null===(t=e.stationId)||void 0===t?void 0:t._id}))},className:"action-edit "})}),(0,z.jsx)("div",{className:"ml-3",children:(0,z.jsx)(b.Z,{size:20,className:"action-delete",onClick:function(){var e;xn(!0),Zn(null===(e=n.row.original)||void 0===e?void 0:e._id)}})})]})}}]}),[R]),Bn=(0,c.useTable)({data:S,columns:Cn,manualSortBy:!0,initialState:{pageSize:X,pageIndex:0}},c.useSortBy,c.usePagination),Nn=Bn.getTableProps,Tn=Bn.getTableBodyProps,In=Bn.prepareRow,Pn=Bn.rows,zn=(Bn.state.pageIndex,Bn.headerGroups),En=(0,s.useCallback)((0,r.Z)((0,a.Z)().mark((function n(){var r;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return L(!0),r={currentPage:C+1,limit:X,search:en,sortBy:cn,sortOrder:hn},n.next=4,Z(e,r).then((function(n){n.success?(w(n.data.docs),P(n.data.totalPages),F(!1),L(!1)):t(n.message)}));case 4:case"end":return n.stop()}}),n)}))));(0,s.useEffect)((function(){R&&En()}),[R,C]),(0,s.useEffect)((function(){if(void 0!==en){var n=setTimeout((function(){return B(0)}),En(),100);return function(){return clearTimeout(n)}}}),[en]);var On=function(n){return n!==cn?null:"asc"!==hn?(0,z.jsx)("i",{className:"fa fa-sort-down ml-1 text-dark"}):(0,z.jsx)("i",{className:"fa fa-sort-up ml-1 text-dark"})},Rn=function(){var n=(0,r.Z)((0,a.Z)().mark((function n(){var t;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return h(),n.next=3,a=e,r=jn,(0,j.hi)(a).delete("/admin/station/deleteStationImages/".concat(r)).then(j._y).catch(j.S3);case 3:(t=n.sent).success&&(xn(!1),d(t.message),F(!0));case 5:case"end":return n.stop()}var a,r}),n)})));return function(){return n.apply(this,arguments)}}();return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)("div",{className:"row d-flex justify-content-end",children:[(0,z.jsx)("div",{className:"mt-1 ml-2",children:(0,z.jsxs)("button",{type:"submit",className:" btn btn-success w-10  mr-5 addbtncolor",onClick:function(){U(!0)},children:[(0,z.jsx)(p.Z,{className:"mt-1"}),"Add Images"]})}),(0,z.jsxs)("div",{className:"col-12",children:[(0,z.jsxs)(u.Z,(0,i.Z)((0,i.Z)({},n),{},{children:[(0,z.jsx)("div",{className:"table-responsive table-white-box mt-2",children:(0,z.jsx)("div",{style:{maxHeight:"calc(100vh - 250px)",position:"relative"},children:(0,z.jsxs)("table",(0,i.Z)((0,i.Z)({className:"table"},Nn()),{},{children:[(0,z.jsx)("thead",{style:{position:"sticky",top:"-20px",zIndex:1},children:zn.map((function(n){return(0,z.jsx)("tr",(0,i.Z)((0,i.Z)({},n.getHeaderGroupProps()),{},{children:n.headers.map((function(n){return(0,z.jsx)("th",(0,i.Z)((0,i.Z)({},n.getHeaderProps(n.getSortByToggleProps())),{},{onClick:function(){var e;"id"!==(e=n.id)&&(cn===e?(rn(1),fn("asc"===hn?"desc":"asc"),F(!0)):(rn(1),ln(e),fn("asc"),F(!0)))},children:(0,z.jsx)("div",{children:n.render("Header")})}))}))}))}))}),S.length?(0,z.jsx)("tbody",(0,i.Z)((0,i.Z)({},Tn()),{},{children:Pn.map((function(n){return In(n),(0,z.jsx)("tr",(0,i.Z)((0,i.Z)({},n.getRowProps()),{},{children:n.cells.map((function(n){return(0,z.jsx)("td",(0,i.Z)((0,i.Z)({},n.getCellProps()),{},{className:"email"===n.column.id?"text-lowercase":null,children:n.render("Cell")}))}))}))}))})):R||S.length?(0,z.jsx)(m.Z,{}):(0,z.jsx)("tr",{children:(0,z.jsx)("td",{className:"mt-4 text-center font-weight-bold",colSpan:6,children:(0,z.jsx)("h5",{children:"No data found"})})})]}))})}),(0,z.jsx)(l.Z,{onPageChange:function(n){B(n),F(!0)},page:C,pages:I})]})),(0,z.jsx)(v.Z,{isOpen:D,backdrop:!0,size:"lg",children:D&&(0,z.jsx)(A,{isEdit:q,editData:wn,onClose:function(){U(!1),Y(!1),_n({})},toggleRefresh:function(n){return F(n)}})}),(0,z.jsx)(v.Z,{isOpen:gn,backdrop:!0,children:gn&&(0,z.jsx)(g.Z,{isOpen:gn,onClose:function(){return xn(!1)},confirmText:"Delete",cancelBtnBsStyle:" modalcancelbutton btn btn-secondary",message:"Are you sure you want to delete?",handleConfirm:function(){return Rn()}})})]})]})})}))}}]);