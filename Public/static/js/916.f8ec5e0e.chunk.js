"use strict";(self.webpackChunktest_demo=self.webpackChunktest_demo||[]).push([[916],{83792:function(e,n,t){var r=t(29439),a=t(1413),s=t(47313),i=t(26418),o=t(23486),c=t(46417),l=function(e){return(0,c.jsx)("button",(0,a.Z)((0,a.Z)({},e),{},{children:e.children}))};n.Z=function(e){var n=(0,s.useState)(null),t=(0,r.Z)(n,2),a=t[0],d=t[1],u=e.PageButtonComponent,p=void 0===u?l:u,m=e.changeMethodFlag,h=e.onPageChange,f=e.page,g=e.resetMethodFlag,x=e.page+1,b=(0,s.useCallback)((function(e,n){return n<7?j([1,2,3,4,5,6],n):e%5>=0&&e>4&&e+2<n?[1,e-1,e,e+1,n]:e%5>=0&&e>4&&e+2>=n?[1,n-3,n-2,n-1,n]:[1,2,3,4,5,n]}),[]);(0,s.useEffect)((function(){d(b(null,e.pages))}),[b,e.pages]),(0,s.useEffect)((function(){m&&(0===f?(h(null),h(0)):h(0),g())}),[m,h,f,g]);var j=function(e,n){return e.filter((function(e){return e<=n}))},v=function(n){if(n!==e.page+1){var t=b(n,e.pages);d(j(t,e.pages)),e.onPageChange(n-1)}};return(0,c.jsxs)("div",{className:"Table__pagination",children:[(0,c.jsx)("div",{className:"Table__prevPageWrapper",children:(0,c.jsx)(p,{className:"Table__pageButton",onClick:function(){1!==x&&v(x-1)},disabled:1===x,children:(0,c.jsx)(i.Z,{size:18})})}),(0,c.jsx)("div",{className:"Table__visiblePagesWrapper",children:a&&a.map((function(e,n,t){return(0,c.jsx)(p,{className:x===e?"Table__pageButton Table__pageButton--active":"Table__pageButton",onClick:v.bind(null,e),children:t[n-1]+2<e?"...".concat(e):e},e)}))}),(0,c.jsx)("div",{className:"Table__nextPageWrapper",children:(0,c.jsx)(p,{className:"Table__pageButton",onClick:function(){x!==e.pages&&v(x+1)},disabled:x===e.pages,children:(0,c.jsx)(o.Z,{size:18})})})]})}},5941:function(e,n,t){t(47313);var r=t(97520),a=t.n(r),s=t(46417);n.Z=function(e){var n=e.isOpen,t=e.onClose,r=e.confirmText,i=e.message,o=e.handleConfirm,c=e.cancleBtnTxt,l=e.customIcon,d=e.titleTxt,u=r||"Yes, delete it!",p=!!l;return(0,s.jsx)("div",{children:(0,s.jsx)(a(),{warning:!l,custom:p,showCancel:!0,show:n,confirmBtnText:u,confirmBtnBsStyle:"secondary btn-sm confirmBtn",cancelBtnBsStyle:"success btn-sm confirmBtn",title:d||"",customIcon:l,onConfirm:function(){o()},onCancel:t,cancelBtnText:c||"Cancel",children:i})})}},28767:function(e,n,t){var r,a=t(30168),s=t(17387).ZP.div(r||(r=(0,a.Z)(['\n  .tbl-loader {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    background: rgba(0, 0, 0, 0.05);\n    border-radius: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .lds-ring {\n      div {\n        width: 8px !important;\n        height: 45px !important;\n        margin: 0px !important;\n        border-color: #563c91 transparent transparent transparent !important;\n      }\n    }\n  }\n\n  .module-header {\n    display: flex;\n    align-items: center;\n    @media (max-width: 575.98px) {\n      display: block;\n      .react-form-input {\n        margin-top: 15px;\n        margin-bottom: 5px;\n      }\n      button {\n        margin: 0 !important;\n      }\n    }\n  }\n  table {\n    width: 100%;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n  }\n\n  tr:nth-child(even) {\n    background: rgba(0, 0, 0, 0.03);\n  }\n\n  tr:nth-child(odd) {\n    background: rgba(255, 255, 255);\n  }\n\n  .table-container {\n    margin: auto 24px;\n    padding-bottom: 20px;\n  }\n  .custom-react-table-theme-class {\n    th {\n      min-width: 200px;\n    }\n    tbody {\n      td {\n        padding: 10px;\n        font-family: "muli-medium";\n        color: #757575;\n      }\n      td.wide-cell {\n        width: 150px;\n      }\n    }\n  }\n\n  .Table__itemCount {\n    font-size: 14px;\n  }\n\n  .Table__pagination {\n    display: flex;\n    justify-content: flex-end;\n    padding: 20px 24px;\n  }\n\n  .Table__pageButton {\n    font-size: 14px;\n    outline: none;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    color: #757575 !important;\n    margin: 0 5px;\n  }\n\n  .Table__pageButton:disabled {\n    cursor: not-allowed;\n    color: gray;\n  }\n\n  .Table__pageButton--active {\n    font-weight: bold;\n    background: #6ab664;\n    color: white !important;\n    width: 38px;\n    height: 29px;\n    border-radius: 6px;\n  }\n\n  .tabl-search {\n    padding: 4px;\n    margin: 10px;\n    border-radius: 3px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    &:focus {\n      outline: 0;\n    }\n  }\n\n  .back-icon {\n    position: absolute;\n    right: 30px;\n    bottom: 27px;\n    color: #563c91;\n  }\n\n  .-sort-desc {\n    box-shadow: none !important;\n    &:before {\n      content: "\u25bc";\n      float: right;\n      margin-right: 14px;\n      color: #563c91;\n    }\n  }\n\n  .-sort-asc {\n    box-shadow: none !important;\n    &:before {\n      content: "\u25b2";\n      float: right;\n      margin-right: 14px;\n      color: #563c91;\n    }\n  }\n  .react-action-class.wide-cell {\n    width: 150px;\n  }\n  .react-action-class {\n    button {\n      height: auto !important;\n      width: auto !important;\n    }\n  }\n  .break-word {\n    word-break: break-word;\n  }\n'])));n.Z=s},31916:function(e,n,t){t.r(n),t.d(n,{default:function(){return D}});var r=t(1413),a=t(74165),s=t(15861),i=t(29439),o=t(47313),c=t(45110),l=t(83792),d=t(28767),u=t(1084),p=t(9038),m=t(20086),h=function(e,n){return(0,m.hi)(e).get("advertisement/adds/getAdvertisement?search=".concat(n.search,"&page=").concat(n.page,"&sortBy=").concat(n.sortOrder,"&sortedF=").concat(n.sortBy,"&limit=").concat(n.limit)).then(m._y).catch(m.S3)},f=function(e,n){return(0,m.hi)(e).post("advertisement/adds/addAdvertisement",n).then(m._y).catch(m.S3)},g=function(e,n,t){return(0,m.hi)(e).put("advertisement/adds/updateAdvertisement/".concat(n),t).then(m._y).catch(m.S3)},x=t(4942),b=t(9372),j={SUCCESS:"SUCCESS",ERROR:"ERROR",FETHING:"FETHING",success:function(e){var n;return""!==e&&b.Am.success(e,(n={position:"top-right"},(0,x.Z)(n,"position","top-right"),(0,x.Z)(n,"autoClose",5e3),(0,x.Z)(n,"hideProgressBar",!0),(0,x.Z)(n,"closeOnClick",!0),(0,x.Z)(n,"pauseOnHover",!0),(0,x.Z)(n,"draggable",!0),n)),{type:j.SUCCESS,resType:"success",messages:e,show:!0,isFetching:!1}},error:function(e){return""!==e&&b.Am.error(e,{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),{type:j.ERROR,resType:"error",messages:e,show:!0,isFetching:!1}},fetching:function(){return{type:j.FETHING,isFetching:!0}}},v=j,Z=t(78911),k=t(59884),S=t(14303),w=t(42995),y=t(5211),C=t(5941),N=t(12756),_=t(12213),T=t(79429),B=t(15869),P=(0,T.j0)({validationSchema:B.Ry().shape({title:B.Z_().required("Please enter title").matches(/^[a-zA-Z ]+$/,"Title must contain only letters"),image:B.nK().required("Please upload image"),link:B.Z_().required("Please enter link").url("Invalid URL format"),description:B.Z_().required("Please enter description"),section:B.IX().min(1,"Please select section").of(B.Z_().required("Section name is required"))}),mapPropsToValues:function(e){return{title:"",image:"",link:"",description:"",section:[]}},validateOnMount:!0,handleSubmit:function(e){},displayName:"AdvertisementValidationForm",enableReinitialize:!0}),A=t(11585),R=t(46417),E="http://3.142.224.88:8000",H=v.success,I=v.error,O=v.fetching,F=(0,p.qC)(P,(0,u.$j)((function(e){return(0,r.Z)((0,r.Z)({},e.themeChanger),{},{token:e.auth.accessToken})}),{success:H,error:I,fetching:O}))((function(e){var n=(0,o.useState)(),t=(0,i.Z)(n,2),c=t[0],l=t[1],d=(0,o.useState)(!1),u=(0,i.Z)(d,2),p=u[0],m=u[1],h=(0,o.useState)(!1),x=(0,i.Z)(h,2),b=x[0],j=x[1],v=e.isEdit,Z=e.editData,k=e.onClose,S=e.values,w=e.handleChange,y=e.handleBlur,C=e.errors,T=e.touched,B=e.submitCount,P=e.token,O=e.isValid,F=e.setValues,z=e.handleSubmit,q=e.toggleRefresh,W=e.setFieldValue,D=[{value:"Home",label:"Home"},{value:"booking",label:"booking"},{value:"map",label:"map"}];(0,o.useEffect)((function(){v&&F((0,r.Z)({},Z))&&l(Z.image)}),[Z]);var L=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(n){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),z(),O){e.next=4;break}return e.abrupt("return");case 4:if((t=new FormData).append("title",S.title.toLowerCase()),t.append("description",S.description.toLowerCase()),t.append("link",S.link),t.append("image",S.image),t.append("section",S.section),j(!0),!v){e.next=16;break}return e.next=14,g(P,S._id,t).then((function(e){e.success?(H(e.message),q(!0),j(!1),k()):(I(e.message),j(!1))}));case 14:e.next=18;break;case 16:return e.next=18,f(P,t).then((function(e){e.success?(H(e.message),j(!1),q(!0),k()):(I(e.message),j(!1),q(!0))}));case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),U=function(e){var n=e.field;return C[n]&&T[n]||B>0?(0,R.jsx)("span",{className:e.class?e.class:"error-msg",children:C[n]}):(0,R.jsx)("span",{})};return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)(N.Z,{toggle:function(){return k()},children:[v?"Edit":"Add"," Advertisement"]}),(0,R.jsx)(_.Z,{children:(0,R.jsxs)("form",{children:[(0,R.jsxs)("div",{className:"form-group",children:[(0,R.jsxs)("label",{children:["Title ",(0,R.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),(0,R.jsx)("input",{type:"text",className:"form-control react-form-input ",id:"title",onChange:w,onBlur:y,value:S.title,placeholder:"Title"}),(0,R.jsx)(U,{field:"title"})]}),(0,R.jsxs)("div",{className:"form-group ",children:[(0,R.jsxs)("label",{className:"",children:["Image ",(0,R.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),(0,R.jsx)("div",{className:"d-flex flex-row",children:(0,R.jsx)("input",{type:"file",id:"image",className:"input-group-text  react-form-input",accept:".jpg,.png,.jpeg,.svg",onChange:function(e){if(e.target.files[0]){W("image",e.target.files[0]);var n=URL.createObjectURL(e.target.files[0]);l(n),m(!0)}},onBlur:y})}),(0,R.jsx)(U,{field:"image"}),(0,R.jsx)("div",{children:v&&!p?(0,R.jsx)("a",{href:"".concat(E,"/").concat(c),target:"_blank",rel:"noopener noreferrer",children:(0,R.jsx)("div",{className:"h-80 d-inline-block rounded-0",children:(0,R.jsx)("img",{src:"".concat(E,"/").concat(c),alt:"...",className:"rounded-0 previewImage"})})}):p&&(0,R.jsx)("a",{href:"".concat(c),target:"_blank",rel:"noopener noreferrer",children:(0,R.jsx)("div",{className:"h-80 d-inline-block rounded-0",children:(0,R.jsx)("img",{src:c,className:"rounded-0 previewImage"})})})})]}),(0,R.jsxs)("div",{className:"form-group",children:[(0,R.jsxs)("label",{children:["Link ",(0,R.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),(0,R.jsx)("input",{type:"text",className:"form-control react-form-input ",id:"link",onChange:w,onBlur:y,value:S.link,placeholder:"Link"}),(0,R.jsx)(U,{field:"link"})]}),(0,R.jsxs)("div",{className:"form-group",children:[(0,R.jsxs)("label",{children:["Description"," ",(0,R.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),(0,R.jsx)("input",{type:"text",className:"form-control react-form-input ",id:"description",onChange:w,onBlur:y,value:S.description,placeholder:"Description"}),(0,R.jsx)(U,{field:"description"})]}),(0,R.jsxs)("div",{className:"form-group",children:[(0,R.jsxs)("label",{children:["Section"," ",(0,R.jsx)("span",{style:{color:"red",fontWeight:"bold"},children:"*"})]}),(0,R.jsx)(A.ZP,{id:"section",placeholder:"Select Section..",options:D,isMulti:!0,onBlur:y,value:D.filter((function(e){return S.section.includes(e.value)})),onChange:function(e){if(e&&null!==e){var n=e.map((function(e){return e.value}));W("section",n)}else W("section",[])}}),(0,R.jsx)(U,{field:"section"})]}),(0,R.jsxs)("div",{className:"row justify-content-center",children:[(0,R.jsx)("button",{color:"success",onClick:function(e){return L(e)},type:"submit",className:"btn btn-success mx-3 btnsize",disabled:b,children:v?"Update":"Save"}),(0,R.jsx)("button",{onClick:function(){k()},className:"btn  btn-secondary btnsize",children:"Cancel"})]})]})})]})})),z=v.success,q=v.error,W=v.fetching,D=(0,p.qC)((0,u.$j)((function(e){return{accessToken:e.auth.accessToken}}),{success:z,error:q,fetching:W}))((function(e){var n=e.accessToken,t=e.error,u=e.success,p=e.fetching,f=(0,o.useState)(!0),g=(0,i.Z)(f,2),x=(g[0],g[1],(0,o.useState)([])),b=(0,i.Z)(x,2),j=b[0],v=b[1],N=(0,o.useState)(1),_=(0,i.Z)(N,2),T=_[0],B=_[1],P=(0,o.useState)(0),A=(0,i.Z)(P,2),E=A[0],H=A[1],I=(0,o.useState)(!0),O=(0,i.Z)(I,2),z=O[0],q=O[1],W=(0,o.useState)(!1),D=(0,i.Z)(W,2),L=D[0],U=D[1],V=(0,o.useState)(!1),G=(0,i.Z)(V,2),M=G[0],$=G[1],K=(0,o.useState)(!1),X=(0,i.Z)(K,2),Y=(X[0],X[1]),J=(0,o.useState)(10),Q=(0,i.Z)(J,2),ee=Q[0],ne=(Q[1],(0,o.useState)("")),te=(0,i.Z)(ne,2),re=te[0],ae=te[1],se=(0,o.useState)(1),ie=(0,i.Z)(se,2),oe=(ie[0],ie[1]),ce=(0,o.useState)(""),le=(0,i.Z)(ce,2),de=le[0],ue=le[1],pe=(0,o.useState)(),me=(0,i.Z)(pe,2),he=(me[0],me[1],(0,o.useState)("asc")),fe=(0,i.Z)(he,2),ge=fe[0],xe=fe[1],be=(0,o.useState)(""),je=(0,i.Z)(be,2),ve=je[0],Ze=je[1],ke=(0,o.useState)({}),Se=(0,i.Z)(ke,2),we=Se[0],ye=Se[1],Ce=(0,o.useState)(),Ne=(0,i.Z)(Ce,2),_e=Ne[0],Te=Ne[1],Be=function(e){var n=e.title,t=e.renderSortArrow;return(0,R.jsxs)("div",{children:[n,t&&t()]})},Pe=(0,o.useMemo)((function(){return[{Header:function(e){return(0,R.jsx)(Be,{title:"Title",renderSortArrow:function(){return ze(e.column.id)}})},accessor:"title"},{Header:function(e){return(0,R.jsx)(Be,{title:"link",renderSortArrow:function(){return ze(e.column.id)}})},accessor:"link"},{Header:function(e){return(0,R.jsx)(Be,{title:"Image"})},accessor:"image"},{Header:function(e){return(0,R.jsx)(Be,{title:"description",renderSortArrow:function(){return ze(e.column.id)}})},accessor:"description"},{Header:function(e){return(0,R.jsx)(Be,{title:"Section",renderSortArrow:function(){return ze(e.column.id)}})},accessor:"section",Cell:function(e){var n=e.cell.value;return(0,R.jsx)("div",{children:n.join(", ")})}},{Header:function(e){return(0,R.jsx)(Be,{title:"Action"})},accessor:"action",Cell:function(e){return(0,R.jsxs)("div",{className:"d-flex",children:[(0,R.jsx)("div",{children:(0,R.jsx)(k.Z,{size:18,onClick:function(){$(!0),U(!0),ye(null===e||void 0===e?void 0:e.row.original)},className:"action-edit "})}),(0,R.jsx)("div",{className:"ml-3",children:(0,R.jsx)(S.Z,{size:20,className:"action-delete",onClick:function(){var n;Te(!0),Ze(null===(n=e.row.original)||void 0===n?void 0:n._id)}})})]})}}]}),[z]),Ae=(0,c.useTable)({data:j,columns:Pe,manualSortBy:!0,initialState:{pageSize:ee,pageIndex:0}},c.useSortBy,c.usePagination),Re=Ae.getTableProps,Ee=Ae.getTableBodyProps,He=Ae.prepareRow,Ie=Ae.rows,Oe=(Ae.state.pageIndex,Ae.headerGroups),Fe=(0,o.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),r={page:E+1,limit:ee,search:re,sortBy:de,sortOrder:ge},e.next=4,h(n,r).then((function(e){e.success?(v(e.data.docs),B(e.data.totalPages),q(!1),Y(!1)):t(e.message)}));case 4:case"end":return e.stop()}}),e)}))));(0,o.useEffect)((function(){z&&Fe()}),[z,E]),(0,o.useEffect)((function(){if(void 0!==re){var e=setTimeout((function(){return H(0)}),Fe(),100);return function(){return clearTimeout(e)}}}),[re]);var ze=function(e){return e!==de?null:"asc"!==ge?(0,R.jsx)("i",{className:"fa fa-sort-down ml-1 text-dark"}):(0,R.jsx)("i",{className:"fa fa-sort-up ml-1 text-dark"})},qe=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(),e.next=3,r=n,a=ve,(0,m.hi)(r).delete("advertisement/adds/deleteAdvertisement/".concat(a)).then(m._y).catch(m.S3);case 3:(t=e.sent).success&&(Te(!1),u(t.message),q(!0));case 5:case"end":return e.stop()}var r,a}),e)})));return function(){return e.apply(this,arguments)}}();return(0,R.jsx)(R.Fragment,{children:(0,R.jsxs)("div",{className:"row d-flex justify-content-end",children:[(0,R.jsx)("div",{className:"col-lg-4 col-md-6 ",children:(0,R.jsx)("input",{className:"form-control react-form-input mt-2",type:"search",placeholder:"Search Advertisement",onChange:function(e){ae(e.target.value),oe(1)}})}),(0,R.jsx)("div",{className:"mt-1 ml-2",children:(0,R.jsxs)("button",{type:"submit",className:" btn btn-success w-10  mr-5 addbtncolor",onClick:function(){U(!0)},children:[(0,R.jsx)(y.Z,{className:"mt-1"}),"Add Advertisement"]})}),(0,R.jsxs)("div",{className:"col-12",children:[(0,R.jsxs)(d.Z,(0,r.Z)((0,r.Z)({},e),{},{children:[(0,R.jsx)("div",{className:"table-responsive table-white-box mt-2",children:(0,R.jsx)("div",{style:{maxHeight:"calc(100vh - 250px)",position:"relative"},children:(0,R.jsxs)("table",(0,r.Z)((0,r.Z)({className:"table"},Re()),{},{children:[(0,R.jsx)("thead",{style:{position:"sticky",top:"-20px",zIndex:1},children:Oe.map((function(e){return(0,R.jsx)("tr",(0,r.Z)((0,r.Z)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return(0,R.jsx)("th",(0,r.Z)((0,r.Z)({},e.getHeaderProps(e.getSortByToggleProps())),{},{onClick:function(){var n;"id"!==(n=e.id)&&(de===n?(oe(1),xe("asc"===ge?"desc":"asc"),q(!0)):(oe(1),ue(n),xe("asc"),q(!0)))},children:(0,R.jsx)("div",{children:e.render("Header")})}))}))}))}))}),j.length?(0,R.jsx)("tbody",(0,r.Z)((0,r.Z)({},Ee()),{},{children:Ie.map((function(e){return He(e),(0,R.jsx)("tr",(0,r.Z)((0,r.Z)({},e.getRowProps()),{},{children:e.cells.map((function(e){return(0,R.jsx)("td",(0,r.Z)((0,r.Z)({},e.getCellProps()),{},{className:"link"===e.column.id?"text-lowercase":null,children:"link"===e.column.id?(0,R.jsx)("a",{href:e.value,target:"_blank",rel:"noopener noreferrer",children:e.value}):"image"===e.column.id?(0,R.jsx)("img",{src:"".concat("http://3.142.224.88:8000","/").concat(e.value),alt:"Image",className:"imageView"}):e.render("Cell")}))}))}))}))})):z||j.length?(0,R.jsx)(Z.Z,{}):(0,R.jsx)("tr",{children:(0,R.jsx)("td",{className:"mt-4 text-center font-weight-bold",colSpan:6,children:(0,R.jsx)("h5",{children:"No data found"})})})]}))})}),(0,R.jsx)(l.Z,{onPageChange:function(e){H(e),q(!0)},page:E,pages:T})]})),(0,R.jsx)(w.Z,{isOpen:L,backdrop:!0,size:"lg",children:L&&(0,R.jsx)(F,{isEdit:M,editData:we,onClose:function(){U(!1),$(!1),ye({})},toggleRefresh:function(e){return q(e)}})}),(0,R.jsx)(w.Z,{isOpen:_e,backdrop:!0,children:_e&&(0,R.jsx)(C.Z,{isOpen:_e,onClose:function(){return Te(!1)},confirmText:"Delete",cancelBtnBsStyle:" modalcancelbutton btn btn-secondary",message:"Are you sure you want to delete?",handleConfirm:function(){return qe()}})})]})]})})}))}}]);